<section  id="dashboard-profile">
    <div class="container-fluid">
        <div class="row cont-bottom">
            <div class="col-12 col-lg-7 dashboard mb-md-2 pb-lg-5">
                <h6 class="heading pb-1">Dashboard</h6>
                <div class="card header-card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 col-sm-9">
                                <h5 class="card-title mb-1">Welcome back {{userService.userProfileInfo.firstName |titlecase}}!</h5>
                                <p class="card-text lead mb-1">Pregnancy village is Nigeria's first online community platform for pregnant women.
                                    stay updated with all the happenings on your dashboard.
                                </p>
                                <div class="mx-auto mt-4 mt-sm-0">
                                    <button class="btn btn-primary mr-1 mb-3"  (click)="showModalDialogBM()" *ngIf="true"  role="button">Provide a service</button>
                                    <button class="btn btn-primary mb-3"  (click)="showModalDialogPS()" *ngIf="true"  role="button">Become a merchant</button>
                                </div>
                            </div>
                            <div class="col-sm-3 d-none d-sm-flex">
                                <img src="../../../../assets/images/lady-icon.png" class="img-fluid  d-none d-sm-flex">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-md-8 mx-md-auto mx-lg-0 activities mb-md-3 pb-lg-5">
                        <div class="card card-result shadow-sm">
                            <div class="card-body pb-md-2">
                              <h6 class="card-title heading">Activities</h6>
                              <ul class="list-group list-group-flush p-2">
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                  Posts
                                  <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">{{postsCount}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                    Products
                                    <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">Empty</span>
                                  </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                  Cart
                                  <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">Empty</span>
                                </li>
                                
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                    Services
                                    <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">None</span>
                                  </li>
                              </ul>
                             
                            </div>
                          </div>
                    </div>

                    <!-- <div class="col-12 col-md-6">
                        <div class="card card-result shadow-sm">
                            <div class="card-body">
                              <h6 class="card-title heading">Activities</h6>
                              <ul class="list-group list-group-flush p-2">
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                  Posts
                                  <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">{{postsCount}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                    Products
                                    <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">0</span>
                                  </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                  Cart
                                  <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">Empty</span>
                                </li>
                                
                                <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2">
                                    Services
                                    <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;">None</span>
                                  </li>
                              </ul>
                             
                            </div>
                          </div>
                    </div> -->
                </div>
                
            </div>
            <div class="col-12 col-lg-5 profile">
                <h6 class="heading pb-1">Profile</h6>
                <div class="card card-profile">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-4 offset-4">
                                <img src="../../../../assets/images/lady-icon.png" class="img-fluid rounded-circle p-1">
                            </div>
                            <div class="col-12">
                                <h5 class="username text-truncate text-center">{{userService.userProfileInfo.firstName |titlecase}} {{userService.userProfileInfo.lastName|titlecase}}</h5>
                                <button class="btn btn-primary mr-3 mb-3 col-8 offset-2" (click)="showModalDialogEP()" *ngIf="true"  role="button">Edit Profile</button>
                            </div>
                        </div>
                            <div class="col-12 mt-3">
                                <ul class="list-group list-group-flush p-2">
                                    <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2 font-weight-bold">
                                        {{userService.userProfileInfo.firstName |titlecase}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="far fa-user"></i></span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2 font-weight-bold">
                                        {{userService.userProfileInfo.lastName |titlecase}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="far fa-user"></i></span>
                                        </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2 font-weight-bold">
                                        {{userService.userProfileInfo.createdAt |date}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="far fa-calendar-alt"></i></span>
                                    </li>
                                        
                                    <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2 font-weight-bold">
                                        {{userService.userProfileInfo.phoneNumber}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="fas fa-phone"></i></span>
                                    </li>
                                    <li class="list-group-item d-flex d-sm-none d-lg-flex justify-content-between align-items-center card-text mb-2 font-weight-bold small">
                                        {{userService.userProfileInfo.email}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="far fa-envelope"></i></span>
                                    </li>
                                    <li class="list-group-item d-none d-sm-flex d-lg-none justify-content-between align-items-center card-text mb-2 font-weight-bold">
                                        {{userService.userProfileInfo.email}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="far fa-envelope"></i></span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center card-text mb-2 font-weight-bold small">
                                        <!-- {{userService.userProfileInfo.email}}
                                        <span class="badge badge-info badge-pill p-2" style="background-color: #17a2b8;"><i class="far fa-envelope"></i></span> -->
                                    </li>
                                </ul>
                                         
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <p-dialog class="my-3 d-block d-lg-none" [(visible)]="displayModal" [modal]="true" [style]="{width: '80vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
        <div class="card col-12 my-2 card-modal">
            <div class="card-body" *ngIf="editProfile">
                <div class="alert alert-info col-12"  *ngIf="editProfileForm.dirty">
                    <strong>Information:</strong> You have made changes, any unsaved changes will be lost
                </div>
                <h5 class="card-title text-muted py-1">Edit your Profile</h5>
                <form class="col-12" #editForm [formGroup]="editProfileForm" autocomplete="off" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <label for="firstName" class="col-sm-12 col-form-label" >Firstname</label>
                        <input type="text" class="form-control col-12" id="editFirstname" placeholder="" 
                            formControlName="firstName" 
                            [class.is-invalid]="editProfileForm.get('firstName').invalid && editProfileForm.get('firstName').touched">
                        <div class="invalid-feedback">Please fill-out your firstname</div>
                    </div>

                    <div class="form-group">
                        <label for="lastName" class="col-12 col-form-label" >Lastname</label>
                        <input type="text" class="form-control col-12" id="editLastname" placeholder=""
                            formControlName="lastName"
                            [class.is-invalid]="editProfileForm.get('lastName').invalid && editProfileForm.get('lastName').touched">
                        <div class="invalid-feedback">Please fill-out your lastname</div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="col-12 col-form-label" >Email</label>           
                        <input type="email" class="form-control col-12" id="editEmail" placeholder=""
                            formControlName="email"  readonly
                            [class.is-invalid]="editProfileForm.get('email').invalid && editProfileForm.get('email').touched">
                        <div *ngIf="editProfileForm.get('email').value === ''" class="invalid-feedback">Please fill-out your email address</div>
                        <div *ngIf="editProfileForm.get('email').value != ''" class="invalid-feedback">Please enter a valid email address</div>
                        <!-- <span id="emailError" style="color: red; font-size: 80%; line-height: 145%;">{{ emailError }}</span> -->
                    </div>

                    <div class="form-group">
                        <label for="phoneNumber" class="col-sm-12 col-form-label" >Phone Number</label>           
                        <input type="text" class="form-control col-12" id="phoneNumber"
                            formControlName="phoneNumber" placeholder=" "  [textMask]="{mask:phoneMask}"
                            [class.is-invalid]="editProfileForm.get('phoneNumber').invalid && editProfileForm.get('phoneNumber').touched">
                        <div *ngIf="editProfileForm.get('phoneNumber').value === ''" class="invalid-feedback">Please fill-out your phone Number</div>
                        <div *ngIf="editProfileForm.get('phoneNumber').value != ''" class="invalid-feedback">Please enter a valid Phone number</div>
                        <!-- <span id="emailError" style="color: red; font-size: 80%; line-height: 145%;">{{ emailError }}</span>  -->
                        </div>

                    <!-- <div class="form-group mx-auto" *ngIf="!this.changePassword">
                        <button class="btn btn-ghost" (click)="onClickChangePassword(editProfileForm)"> change password</button>
                            
                        
                    </div>

                    <div class="form-group"  *ngIf="this.changePassword">
                        <label for="password" class="col-12 col-form-label" >Password</label>   
                        <input type="password"  class="form-control col-12" id="editPassword" placeholder=""
                            formControlName="password" #password autocomplete="new-password"
                            [class.is-invalid]="editProfileForm.get('password').errors && editProfileForm.get('password').touched">
                            <div class="invalid-feedback" *ngIf="editProfileForm.get('password').hasError('required') && editProfileForm.get('password').touched">Please fill-out your password</div>
                            <div class="invalid-feedback" *ngIf="editProfileForm.get('password').hasError('minlength') && editProfileForm.get('password').touched">minimum length of password is 5 characters</div>
                    </div>

                    <div class="form-group" *ngIf="this.changePassword">
                        <input type="password" class="form-control col-12" id="ConfirmPassword" placeholder="Confirm password"
                        formControlName="confirmPassword" autocomplete="new-password"
                        [class.is-invalid]="(editProfileForm.hasError('mismatch') && editProfileForm.get('confirmPassword').touched) || (editProfileForm.get('confirmPassword').errors && editProfileForm.get('confirmPassword').touched)">
                        <div class="invalid-feedback" *ngIf="editProfileForm.get('confirmPassword').errors && editProfileForm.get('confirmPassword').touched">Please confirm your password</div>
                        <div class="invalid-feedback" >Password must match!</div>
                    </div> -->

                    <div class="form-group mx-auto pb-3">
                        <button type="submit" class="col-sm-6 btn btn-primary btn-ghost" [disabled]="!editProfileForm.dirty">Save <i *ngIf="spin" class="fa fa-spinner fa-spin" style="font-size:24px"></i></button> 
                        <!-- <span class="mt-2 pl-2"><a href="#"> Already have an account? Sign in</a></span> -->
                    </div>
                </form>
            </div>   

            <div class="card-body" *ngIf="provService">
                <h5 class="card-title text-center"> Coming soon</h5>
            </div> 
            <div class="card-body" *ngIf="beMerchant">
                <h5 class="card-title text-center"> Coming soon</h5>
             </div>
        </div>
        <p-footer>
            <button type="button" class="btn btn-secondary"  (click)="displayModal=false">Close</button>
        </p-footer>
    </p-dialog>

    <p-dialog class="my-3 d-none d-lg-block" [(visible)]="displayModal" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
        <div class="card col-8 my-2 container mx-auto">
            <div class="card-body" *ngIf="editProfile">
                <div class="alert alert-info col-12"  *ngIf="editProfileForm.dirty">
                    <strong>Information:</strong> You have made changes, any unsaved changes will be lost
                </div>
                <h5 class="card-title text-muted py-2">Edit your Profile</h5>
                <form class="col-12"  #editForm [formGroup]="editProfileForm" autocomplete="off" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <label for="firstName" class="col-sm-12 col-form-label" >Firstname</label>
                        <input type="text" class="form-control col-12" id="editFirstname" placeholder="" 
                            formControlName="firstName" 
                            [class.is-invalid]="editProfileForm.get('firstName').invalid && editProfileForm.get('firstName').touched">
                        <div class="invalid-feedback">Please fill-out your firstname</div>
                    </div>

                    <div class="form-group">
                        <label for="lastName" class="col-12 col-form-label" >Lastname</label>
                        <input type="text" class="form-control col-12" id="editLastname" placeholder=""
                            formControlName="lastName"
                            [class.is-invalid]="editProfileForm.get('lastName').invalid && editProfileForm.get('lastName').touched">
                        <div class="invalid-feedback">Please fill-out your lastname</div>
                    </div>
 
                    <div class="form-group">
                        <label for="email" class="col-12 col-form-label" >Email</label>           
                        <input type="email" class="form-control col-12" id="editEmail" placeholder=""
                            formControlName="email"  readonly
                            [class.is-invalid]="editProfileForm.get('email').invalid && editProfileForm.get('email').touched">
                        <div *ngIf="editProfileForm.get('email').value === ''" class="invalid-feedback">Please fill-out your email address</div>
                        <div *ngIf="editProfileForm.get('email').value != ''" class="invalid-feedback">Please enter a valid email address</div>
                        <!-- <span id="emailError" style="color: red; font-size: 80%; line-height: 145%;">{{ emailError }}</span> -->
                    </div>

                    <div class="form-group">
                        <label for="phoneNumber" class="col-sm-12 col-form-label" >Phone Number</label>           
                        <input type="text" class="form-control col-12" id="phoneNumber"
                            formControlName="phoneNumber" placeholder=" "  [textMask]="{mask:phoneMask}"
                            [class.is-invalid]="editProfileForm.get('phoneNumber').invalid && editProfileForm.get('phoneNumber').touched">
                        <div *ngIf="editProfileForm.get('phoneNumber').value === ''" class="invalid-feedback">Please fill-out your phone Number</div>
                        <div *ngIf="editProfileForm.get('phoneNumber').value != ''" class="invalid-feedback">Please enter a valid Phone number</div>
                        <!-- <span id="emailError" style="color: red; font-size: 80%; line-height: 145%;">{{ emailError }}</span>  -->
                        </div>

                    <!-- <div class="form-group mx-auto" *ngIf="!this.changePassword">
                        <button class="btn btn-ghost" (click)="onClickChangePassword(editProfileForm)"> change password</button>
                            
                        
                    </div>

                    <div class="form-group"  *ngIf="this.changePassword">
                        <label for="password" class="col-12 col-form-label" >Password</label>   
                        <input type="password"  class="form-control col-12" id="editPassword" placeholder=""
                            formControlName="password" #password autocomplete="new-password"
                            [class.is-invalid]="editProfileForm.get('password').errors && editProfileForm.get('password').touched">
                            <div class="invalid-feedback" *ngIf="editProfileForm.get('password').hasError('required') && editProfileForm.get('password').touched">Please fill-out your password</div>
                            <div class="invalid-feedback" *ngIf="editProfileForm.get('password').hasError('minlength') && editProfileForm.get('password').touched">minimum length of password is 5 characters</div>
                    </div>

                    <div class="form-group" *ngIf="this.changePassword">
                        <input type="password" class="form-control col-12" id="ConfirmPassword" placeholder="Confirm password"
                        formControlName="confirmPassword" autocomplete="new-password"
                        [class.is-invalid]="(editProfileForm.hasError('mismatch') && editProfileForm.get('confirmPassword').touched) || (editProfileForm.get('confirmPassword').errors && editProfileForm.get('confirmPassword').touched)">
                        <div class="invalid-feedback" *ngIf="editProfileForm.get('confirmPassword').errors && editProfileForm.get('confirmPassword').touched">Please confirm your password</div>
                        <div class="invalid-feedback" >Password must match!</div>
                    </div> -->

                    <div class="form-group mx-auto pb-3">
                        <button type="submit" class="col-sm-6 btn btn-primary btn-ghost" [disabled]="!editProfileForm.dirty">Save <i *ngIf="spin" class="fa fa-spinner fa-spin" style="font-size:24px"></i></button> 
                        <!-- <span class="mt-2 pl-2"><a href="#"> Already have an account? Sign in</a></span> -->
                    </div>
                </form>
            </div>   

            <div class="card-body py-4" *ngIf="provService">
                <h5 class="card-title text-center"> Coming soon</h5>
            </div> 
            <div class="card-body" *ngIf="beMerchant">
                <h5 class="card-title text-center"> Coming soon</h5>
             </div>
        </div>
        <p-footer>
            <button type="button" class="btn btn-secondary"  (click)="displayModal=false">Close</button>
        </p-footer>
    </p-dialog>
</section>
